{%- import "util.jinja.include" as util -%}
{%- set messagegroups = root.messagegroups %}
{% for messagegroupid, messagegroup in messagegroups.items() -%}
{%- set groupname = messagegroupid | pascal -%}
{%- set class_name = (groupname | strip_namespace) + "EventConsumer" %}
# {{ project_name | pascal }} - Generic Event Consumer

Auto-generated Java consumer for {{ groupname }} message group.

## Overview

This is a generic consumer library for receiving CloudEvents messages. It provides a flexible base that can be adapted to different messaging systems.

## Quick Start

### 1. Add to Your Project

**Maven:**
```xml
<dependency>
    <groupId>com.example</groupId>
    <artifactId>{{ project_name | snake }}</artifactId>
    <version>1.0.0</version>
</dependency>
```

**Gradle:**
```gradle
implementation 'com.example:{{ project_name | snake }}:1.0.0'
```

### 2. Implement Event Handlers

```java
import {{ project_name | snake }}.{{ class_name }};

public class MyEventProcessor {
    public static void main(String[] args) {
        {{ class_name }} consumer = new {{ class_name }}();
        
        // Register event handlers
{%- set first_message = messagegroup.messages.items() | first %}
{%- if first_message %}
{%- set messageid, message = first_message %}
{%- set messagename = messageid | pascal | strip_namespace %}
{%- set message_body_type = util.body_type(data_project_name, root, message) %}
        consumer.on{{ messagename }}(event -> {
            {{ message_body_type }} data = event.getData();
            System.out.println("Received {{ messagename }}: " + data);
            processData(data);
        });
{%- endif %}
        
        // Start consuming
        consumer.start();
    }
}
```

## Event Handlers

{% for messageid, message in messagegroup.messages.items() -%}
{%- set messagename = messageid | pascal | strip_namespace %}
{%- set message_body_type = util.body_type(data_project_name, root, message) %}
### {{ messagename }}

**Event Type:** `{{ messageid }}`  
**Data Type:** `{{ message_body_type }}`

```java
consumer.on{{ messagename }}(event -> {
    {{ message_body_type }} data = event.getData();
    
    // Your processing logic
    processData(data);
});
```

{% endfor %}

## Error Handling

```java
consumer.onError((event, exception) -> {
    logger.error("Failed to process event: " + event.getId(), exception);
});
```

## Dependencies

- **CloudEvents Java SDK** - CloudEvents support
- **Jackson** - JSON serialization

## Learn More

- [CloudEvents Specification](https://cloudevents.io/)
- [xRegistry CLI Documentation](https://github.com/clemensv/xregistry-cli)

## Generated Code

This code was auto-generated by [xRegistry CLI](https://github.com/clemensv/xregistry-cli).

**Message Group:** {{ groupname }}  
**Envelope:** CloudEvents 1.0
{% endfor %}
